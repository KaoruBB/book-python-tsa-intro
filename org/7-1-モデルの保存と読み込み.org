* 第7部　時系列予測の実践的技術
:PROPERTIES:
:CUSTOM_ID: 第7部-時系列予測の実践的技術
:END:
** 第1章　モデルの保存と読み込み
:PROPERTIES:
:CUSTOM_ID: 第1章-モデルの保存と読み込み
:END:
*** 分析の準備
:PROPERTIES:
:CUSTOM_ID: 分析の準備
:END:
#+begin_src python
# 基本のライブラリを読み込む
import numpy as np
import pandas as pd
import scipy as sp
from scipy import stats

# 統計モデルを推定するライブラリ
import statsmodels.api as sm
import statsmodels.tsa.api as tsa

# グラフを描画するライブラリ
from matplotlib import pylab as plt
import seaborn as sns
import matplotlib.dates as mdates
sns.set()

# グラフの日本語表記
from matplotlib import rcParams
rcParams['font.family'] = 'sans-serif'
rcParams['font.sans-serif'] = 'Meiryo'
#+end_src

#+begin_src python
# 表示設定
np.set_printoptions(linewidth=60)
pd.set_option('display.width', 80)

from matplotlib.pylab import rcParams
rcParams['figure.figsize'] = 8, 4
#+end_src

*** 状態空間モデルの推定と予測
:PROPERTIES:
:CUSTOM_ID: 状態空間モデルの推定と予測
:END:
#+begin_src python
# データの読み込み
train_sample = pd.read_csv('7-1-1-train-sample-1.csv', 
                      index_col='date', 
                      parse_dates=True, 
                      dtype='float')

# 日データであることの指定
train_sample.index.freq = 'D'

# 結果の確認
print(train_sample.head(2))
print(train_sample.tail(2))
#+end_src

#+begin_example
                     y
date                  
2000-05-01  182.079325
2000-05-02  141.334794
                     y
date                  
2000-08-07  264.246774
2000-08-08  214.887515
#+end_example

#+begin_src python
# 季節変動ありのローカル線形トレンドモデル
mod_sample = tsa.UnobservedComponents(
    train_sample['y'],              # 対象データ
    level='local linear trend',     # ローカル線形トレンド
    seasonal=7                      # 周期
).fit()

# 推定されたパラメータ
mod_sample.params
#+end_src

#+begin_example
sigma2.irregular     0.106428
sigma2.level        23.394582
sigma2.trend         0.175057
sigma2.seasonal      0.092431
dtype: float64
#+end_example

#+begin_src python
# 予測
forecast_sample = mod_sample.forecast(7)

# 予測結果の確認
forecast_sample
#+end_src

#+begin_example
2000-08-09    246.809538
2000-08-10    277.555325
2000-08-11    296.190844
2000-08-12    325.586665
2000-08-13    317.303417
2000-08-14    269.801246
2000-08-15    221.203045
Freq: D, Name: predicted_mean, dtype: float64
#+end_example

*** 状態空間モデルの保存と読み込み
:PROPERTIES:
:CUSTOM_ID: 状態空間モデルの保存と読み込み
:END:
**** pickle化と読み込み
:PROPERTIES:
:CUSTOM_ID: pickle化と読み込み
:END:
#+begin_src python
# モデルの保存
# 事前にmodフォルダを作っておくこと
mod_sample.save('./mod/bsts_sample.pickle')
#+end_src

#+begin_src python
# モデルの読み込み
mod_loaded = tsa.statespace.MLEResults.load('./mod/bsts_sample.pickle')

# パラメータが一致していることの確認
mod_loaded.params == mod_sample.params
#+end_src

#+begin_example
sigma2.irregular    True
sigma2.level        True
sigma2.trend        True
sigma2.seasonal     True
dtype: bool
#+end_example

**** パラメータのみをファイルに保存して読み込む
:PROPERTIES:
:CUSTOM_ID: パラメータのみをファイルに保存して読み込む
:END:
#+begin_src python
# パラメータの出力
mod_sample.params.to_csv('./mod/params_sample.csv', header=False)
#+end_src

#+begin_src python
# パラメータの読み込み
imported_params = pd.read_csv(
    './mod/params_sample.csv', header=None, 
    index_col=0, dtype=object
).squeeze(1).astype('float64')

# パラメータが一致していることの確認
imported_params == mod_sample.params
#+end_src

#+begin_example
0
sigma2.irregular    True
sigma2.level        True
sigma2.trend        True
sigma2.seasonal     True
dtype: bool
#+end_example

#+begin_src python
# パラメータを設定
mod_sample_useparams = tsa.UnobservedComponents(
    train_sample['y'],              # 対象データ
    level='local linear trend',     # ローカル線形トレンド
    seasonal=7                      # 周期
)

# パラメータを指定してフィルタリング
mod_sample_useparams = mod_sample_useparams.filter(
    params = imported_params)

# 予測結果が一致していることの確認
all(mod_sample_useparams.forecast(7) == forecast_sample)
#+end_src

#+begin_example
True
#+end_example

*** 新しいデータを用いたフィルタリングと予測
:PROPERTIES:
:CUSTOM_ID: 新しいデータを用いたフィルタリングと予測
:END:
#+begin_src python
# データの読み込み
train_sample_2 = pd.read_csv('7-1-2-train-sample-2.csv', 
                      index_col='date', 
                      parse_dates=True, 
                      dtype='float')

# 日データであることの指定
train_sample_2.index.freq = 'D'

# 結果の確認
print(train_sample_2.head(2))
print(train_sample_2.tail(2))
#+end_src

#+begin_example
                     y
date                  
2000-05-01  182.079325
2000-05-02  141.334794
                     y
date                  
2000-08-14  294.948285
2000-08-15  243.335236
#+end_example

#+begin_src python
# パラメータを設定
mod_newdata = tsa.UnobservedComponents(
    train_sample_2['y'],            # 対象データ(新しいデータに変更)
    level='local linear trend',     # ローカル線形トレンド
    seasonal=7                      # 周期
)

# パラメータを指定してフィルタリング
mod_newdata = mod_newdata.filter(params = imported_params)

# パラメータが一致していることの確認
mod_newdata.params == mod_sample.params
#+end_src

#+begin_example
sigma2.irregular    True
sigma2.level        True
sigma2.trend        True
sigma2.seasonal     True
dtype: bool
#+end_example

#+begin_src python
# フィルター化推定量の比較
all(mod_newdata.level["filtered"][0:100] == mod_sample.level["filtered"])
#+end_src

#+begin_example
True
#+end_example

#+begin_src python
# 古いデータを使ったモデルで2週間先まで予測
old_forecast = mod_sample.forecast(14)

# 新しいデータを使ったモデルで1週間先まで予測
new_forecast = mod_newdata.forecast(7)

# グラフサイズの指定
fig, ax = plt.subplots(figsize=(8, 4))

# 折れ線グラフを描く
ax.plot(train_sample_2, label='実際の売り上げ')
ax.plot(old_forecast, label='古いデータを用いた予測値')
ax.plot(new_forecast, label='新しいデータを用いた予測値')

# 凡例
ax.legend()

# 軸の指定
ax.xaxis.set_major_locator(mdates.MonthLocator(interval=1))

# 軸ラベルのフォーマット
ax.xaxis.set_major_formatter(mdates.DateFormatter('%m月%d日'))

# plt.savefig('../図/図/7-1-1-データを追加することで変化する予測結果.svg')
#+end_src

#+caption: png
[[file:7-1-%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E4%BF%9D%E5%AD%98%E3%81%A8%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF_files/7-1-%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E4%BF%9D%E5%AD%98%E3%81%A8%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF_20_0.png]]

*** appendメソッドを用いたデータの追加
:PROPERTIES:
:CUSTOM_ID: appendメソッドを用いたデータの追加
:END:
#+begin_src python
# 追加データ
train_update = train_sample_2.loc['2000-08-09':'2000-08-15']

# データを追加したモデル
mod_update = mod_sample.append(train_update)
#+end_src

#+begin_src python
# フィルター化推定量が一致する
all(mod_newdata.level["filtered"] == mod_update.level["filtered"])
#+end_src

#+begin_example
True
#+end_example

#+begin_src python
# 予測値も一致する
all(new_forecast == mod_update.forecast(7))
#+end_src

#+begin_example
True
#+end_example

*** 複数の予測系列への分析事例
:PROPERTIES:
:CUSTOM_ID: 複数の予測系列への分析事例
:END:
**** データの読み込み
:PROPERTIES:
:CUSTOM_ID: データの読み込み
:END:
#+begin_src python
# データの読み込み
large_data_1 = pd.read_csv('7-1-3-large-train-1.csv', 
                      index_col='date', 
                      parse_dates=True, 
                      dtype='float')

# 日データであることの指定
large_data_1.index.freq = 'D'

# 最初と最後の日付
print(large_data_1.index[[0, -1]])
#+end_src

#+begin_example
DatetimeIndex(['2000-05-01', '2000-08-08'], dtype='datetime64[ns]', name='date', freq=None)
#+end_example

#+begin_src python
large_data_1.shape
#+end_src

#+begin_example
(100, 50)
#+end_example

#+begin_src python
large_data_1.columns
#+end_src

#+begin_example
Index(['y_0', 'y_1', 'y_2', 'y_3', 'y_4', 'y_5', 'y_6', 'y_7', 'y_8', 'y_9',
       'y_10', 'y_11', 'y_12', 'y_13', 'y_14', 'y_15', 'y_16', 'y_17', 'y_18',
       'y_19', 'y_20', 'y_21', 'y_22', 'y_23', 'y_24', 'y_25', 'y_26', 'y_27',
       'y_28', 'y_29', 'y_30', 'y_31', 'y_32', 'y_33', 'y_34', 'y_35', 'y_36',
       'y_37', 'y_38', 'y_39', 'y_40', 'y_41', 'y_42', 'y_43', 'y_44', 'y_45',
       'y_46', 'y_47', 'y_48', 'y_49'],
      dtype='object')
#+end_example

**** パラメータの推定と予測
:PROPERTIES:
:CUSTOM_ID: パラメータの推定と予測
:END:
#+begin_src python
%%time
for i in range(0, large_data_1.shape[1]):    
    # 季節変動ありのローカル線形トレンドモデル
    mod_loop = tsa.UnobservedComponents(
        large_data_1.iloc[:, i],        # 対象データ
        level='local linear trend',     # ローカル線形トレンド
        seasonal=7                      # 周期
    ).fit()

    # パラメータの保存
    if (i == 0):
        params = mod_loop.params
        
         # パラメータを見分けるための名前の設定
        params.name = large_data_1.columns[i]
    else:
        param_temp = mod_loop.params
        
         # パラメータを見分けるための名前の設定
        param_temp.name = large_data_1.columns[i]
        
        # 推定されたパラメータを1つのDataFrameにまとめる
        params = pd.concat([params,param_temp], axis=1)

    # 予測
    if (i == 0):
        forecasts_1 = mod_loop.forecast(14)
        
         # パラメータを見分けるための名前の設定
        forecasts_1.name = large_data_1.columns[i]
    else:
        fore_temp = mod_loop.forecast(14)
        
         # パラメータを見分けるための名前の設定
        fore_temp.name = large_data_1.columns[i]
        
        # 推定されたパラメータを1つのDataFrameにまとめる
        forecasts_1 = pd.concat([forecasts_1, fore_temp], axis=1)
#+end_src

#+begin_example
CPU times: total: 594 ms
Wall time: 2.85 s
#+end_example

#+begin_src python
# 参考：予測結果
forecasts_1
#+end_src

#+begin_html
  <style scoped>
      .dataframe tbody tr th:only-of-type {
          vertical-align: middle;
      }

      .dataframe tbody tr th {
          vertical-align: top;
      }

      .dataframe thead th {
          text-align: right;
      }
  </style>
#+end_html

#+begin_html
  <table border="1" class="dataframe">
#+end_html

#+begin_html
  <thead>
#+end_html

#+begin_html
  <tr style="text-align: right;">
#+end_html

#+begin_html
  <th>
#+end_html

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_0

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_1

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_2

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_3

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_4

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_5

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_6

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_7

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_8

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_9

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

...

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_40

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_41

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_42

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_43

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_44

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_45

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_46

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_47

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_48

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_49

#+begin_html
  </th>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  </thead>
#+end_html

#+begin_html
  <tbody>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-09

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

234.527755

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

271.580318

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

338.468888

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

126.466336

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

226.069109

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

127.079978

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

229.368512

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

583.443863

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

330.158721

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

217.297555

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

487.641718

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

250.702730

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

226.174660

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

623.151330

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

260.272069

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

463.528931

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

568.856548

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

274.810738

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

239.526377

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

469.031701

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-10

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

128.682613

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

258.806619

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

264.112037

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

110.130186

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

299.052616

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

124.478887

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

199.685791

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

657.182597

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

345.374918

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

269.500389

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

605.008828

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

210.865084

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

298.815139

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

643.209069

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

366.308615

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

333.822651

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

530.418224

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

183.049942

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

153.814427

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

500.936822

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-11

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

203.142632

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

271.366055

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

182.076985

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

136.001478

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

271.650303

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

99.473579

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

234.576168

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

631.205762

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

315.251311

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

203.915747

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

572.636325

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

253.004611

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

264.862444

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

577.591150

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

306.356971

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

457.576418

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

594.417113

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

261.017272

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

201.605767

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

609.979862

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-12

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

191.630981

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

222.830145

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

299.465197

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

189.152251

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

184.729904

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

98.548676

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

233.939654

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

649.720158

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

271.570035

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

195.675532

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

530.858306

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

281.727898

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

226.225599

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

686.265180

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

267.284961

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

445.141472

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

557.256792

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

250.196978

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

147.898617

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

590.058962

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-13

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

192.455529

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

274.412981

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

313.583121

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

134.302317

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

181.999919

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

118.905300

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

191.781073

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

715.572996

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

320.149912

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

279.613109

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

528.744911

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

284.279315

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

241.113540

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

522.417827

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

159.194152

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

359.559991

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

680.265153

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

299.732632

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

142.111191

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

522.995836

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-14

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

283.011484

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

280.093720

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

282.120079

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

148.128832

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

225.168480

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

186.072404

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

227.382693

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

679.584427

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

330.960703

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

160.026425

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

535.539154

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

183.578763

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

296.796635

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

578.063669

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

278.545403

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

481.476838

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

601.367887

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

206.104340

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

136.977021

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

594.878748

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-15

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

208.481181

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

367.949666

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

264.042215

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

100.791460

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

262.305656

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

106.047602

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

245.421022

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

638.878396

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

330.575884

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

140.580012

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

642.885306

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

221.874374

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

280.191642

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

636.345155

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

253.778978

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

498.289193

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

620.009832

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

234.222651

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

163.910399

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

570.982414

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-16

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

178.080488

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

290.421926

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

271.670424

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

107.257795

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

230.878856

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

117.202377

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

247.789533

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

643.322259

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

352.734605

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

202.262168

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

521.477756

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

247.733622

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

258.224074

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

659.177257

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

216.432064

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

495.916265

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

622.943182

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

267.942877

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

233.983211

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

489.677262

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-17

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

72.235345

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

277.648226

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

197.313573

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

90.921645

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

303.862364

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

114.601286

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

218.106813

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

717.060993

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

367.950802

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

254.465001

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

638.844867

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

207.895975

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

330.864553

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

679.234996

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

322.468611

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

366.209985

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

584.504858

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

176.182081

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

148.271261

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

521.582383

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-18

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

146.695364

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

290.207663

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

115.278521

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

116.792938

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

276.460051

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

89.595978

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

252.997190

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

691.084158

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

337.827195

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

188.880360

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

606.472364

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

250.035502

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

296.911858

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

613.617078

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

262.516966

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

489.963751

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

648.503748

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

254.149411

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

196.062601

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

630.625423

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-19

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

135.183714

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

241.671753

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

232.666733

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

169.943710

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

189.539652

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

88.671075

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

252.360676

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

709.598553

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

294.145919

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

180.640144

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

564.694344

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

278.758789

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

258.275013

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

722.291107

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

223.444956

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

477.528806

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

611.343426

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

243.329117

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

142.355451

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

610.704523

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-20

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

136.008262

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

293.254589

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

246.784657

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

115.093777

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

186.809666

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

109.027699

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

210.202095

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

775.451391

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

342.725796

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

264.577722

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

562.580949

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

281.310206

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

273.162953

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

558.443755

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

115.354148

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

391.947325

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

734.351788

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

292.864771

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

136.568025

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

543.641397

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-21

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

226.564216

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

298.935328

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

215.321614

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

128.920292

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

229.978227

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

176.194803

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

245.803714

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

739.462823

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

353.536586

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

144.991038

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

569.375192

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

180.609655

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

328.846049

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

614.089597

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

234.705399

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

513.864171

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

655.454521

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

199.236479

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

131.433854

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

615.524309

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-22

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

152.033914

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

386.791274

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

197.243751

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

81.582920

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

267.115404

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

96.170001

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

263.842044

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

698.756791

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

353.151767

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

125.544625

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

676.721345

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

218.905266

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

312.241055

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

672.371082

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

209.938974

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

530.676526

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

674.096466

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

227.354789

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

158.367233

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

591.627975

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  </tbody>
#+end_html

#+begin_html
  </table>
#+end_html

#+begin_html
  <p>
#+end_html

14 rows × 50 columns

#+begin_html
  </p>
#+end_html

**** 新しいデータを用いたフィルタリングと予測
:PROPERTIES:
:CUSTOM_ID: 新しいデータを用いたフィルタリングと予測-1
:END:
#+begin_src python
# データの読み込み
large_data_2 = pd.read_csv('7-1-4-large-train-2.csv', 
                      index_col='date', 
                      parse_dates=True, 
                      dtype='float')

# 日データであることの指定
large_data_2.index.freq = 'D'

# 最初と最後の日付
print(large_data_2.index[[0, -1]])
#+end_src

#+begin_example
DatetimeIndex(['2000-05-01', '2000-08-15'], dtype='datetime64[ns]', name='date', freq=None)
#+end_example

#+begin_src python
%%time
for i in range(0, large_data_2.shape[1]):    
    # 季節変動ありのローカル線形トレンドモデル
    mod_loop = tsa.UnobservedComponents(
        large_data_2.iloc[:, i],        # 対象データ
        level='local linear trend',     # ローカル線形トレンド
        seasonal=7                      # 周期
    )
    
    # パラメータを指定してフィルタリング
    mod_loop = mod_loop.filter(params = params[large_data_2.columns[i]])

    # 予測
    if (i == 0):
        forecasts_2 = mod_loop.forecast(14)
        
         # パラメータを見分けるための名前の設定
        forecasts_2.name = large_data_2.columns[i]
    else:
        fore_temp = mod_loop.forecast(14)
        
         # パラメータを見分けるための名前の設定
        fore_temp.name = large_data_2.columns[i]
        
        # 推定されたパラメータを1つのDataFrameにまとめる
        forecasts_2 = pd.concat([forecasts_2, fore_temp], axis=1)
#+end_src

#+begin_example
CPU times: total: 78.1 ms
Wall time: 187 ms
#+end_example

#+begin_src python
# 参考：予測結果
forecasts_2
#+end_src

#+begin_html
  <style scoped>
      .dataframe tbody tr th:only-of-type {
          vertical-align: middle;
      }

      .dataframe tbody tr th {
          vertical-align: top;
      }

      .dataframe thead th {
          text-align: right;
      }
  </style>
#+end_html

#+begin_html
  <table border="1" class="dataframe">
#+end_html

#+begin_html
  <thead>
#+end_html

#+begin_html
  <tr style="text-align: right;">
#+end_html

#+begin_html
  <th>
#+end_html

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_0

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_1

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_2

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_3

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_4

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_5

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_6

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_7

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_8

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_9

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

...

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_40

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_41

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_42

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_43

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_44

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_45

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_46

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_47

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_48

#+begin_html
  </th>
#+end_html

#+begin_html
  <th>
#+end_html

y_49

#+begin_html
  </th>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  </thead>
#+end_html

#+begin_html
  <tbody>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-16

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

210.933087

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

313.738609

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

256.725444

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

113.011191

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

244.658768

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

102.100221

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

256.160673

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

619.325490

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

340.776921

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

226.027233

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

517.963863

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

259.472633

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

247.169072

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

621.785045

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

215.931720

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

489.518620

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

623.532291

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

221.551340

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

224.110069

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

498.161880

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-17

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

106.124819

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

302.771197

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

179.078386

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

95.950884

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

316.866757

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

99.641849

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

225.785742

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

691.312769

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

354.739291

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

281.068257

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

633.959420

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

219.488821

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

318.153343

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

638.416113

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

321.749988

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

357.672334

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

585.021686

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

130.196927

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

140.037687

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

530.474078

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-18

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

181.268427

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

317.760945

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

97.366901

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

122.749576

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

289.514014

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

74.250477

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

261.612966

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

663.935548

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

323.156926

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

216.237388

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

601.289586

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

263.332504

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

282.587039

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

571.667828

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

263.265033

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

482.227916

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

647.077635

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

206.535103

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

185.789703

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

641.085418

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-19

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

172.058322

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

271.174603

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

214.328592

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

175.569471

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

203.233454

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

72.735281

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

260.761589

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

679.651233

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

279.834081

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

209.012570

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

559.307889

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

290.711545

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

245.994957

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

678.709475

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

223.096202

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

468.633969

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

610.010622

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

194.999869

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

131.632875

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

622.621711

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-20

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

176.279021

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

325.011991

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

223.582270

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

121.525888

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

201.198270

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

92.427380

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

218.420948

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

745.280399

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

327.525516

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

293.642739

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

555.661234

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

295.704433

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

258.025088

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

514.290013

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

114.562058

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

384.647465

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

732.922591

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

243.023571

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

125.596478

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

554.698062

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-21

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

266.817585

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

332.391861

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

192.504179

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

135.088138

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

243.321354

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

159.747317

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

254.521938

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

705.910975

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

336.160789

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

175.587622

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

563.001198

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

195.035354

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

311.190814

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

564.541478

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

234.043845

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

505.136139

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

652.890685

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

148.967121

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

122.128505

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

627.415089

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-22

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

193.797385

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

422.502660

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

173.187643

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

87.361542

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

280.977793

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

79.865971

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

272.500473

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

664.203766

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

337.006147

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

156.247956

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

668.990339

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

233.964522

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

296.388330

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

623.429965

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

208.214473

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

521.348670

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

670.447824

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

176.518133

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

149.219962

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

605.779606

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-23

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

166.755871

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

347.369491

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

179.288531

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

94.372733

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

251.762773

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

91.197258

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

276.661146

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

665.529256

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

358.783068

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

219.605507

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

548.417233

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

259.650712

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

273.378169

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

643.168945

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

170.911363

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

519.124147

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

674.747756

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

207.873607

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

217.948913

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

523.353059

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-24

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

61.947603

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

336.402079

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

101.641473

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

77.312425

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

323.970761

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

88.738886

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

246.286215

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

737.516536

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

372.745438

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

274.646531

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

664.412790

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

219.666900

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

344.362440

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

659.800013

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

276.729631

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

387.277861

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

636.237151

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

116.519194

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

133.876531

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

555.665256

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-25

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

137.091211

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

351.391827

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

19.929987

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

104.111118

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

296.618018

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

63.347514

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

282.113439

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

710.139314

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

341.163074

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

209.815662

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

631.742957

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

263.510583

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

308.796136

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

593.051727

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

218.244676

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

511.833442

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

698.293100

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

192.857370

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

179.628547

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

666.276597

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-26

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

127.881106

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

304.805485

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

136.891679

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

156.931013

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

210.337458

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

61.832318

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

281.262062

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

725.854999

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

297.840228

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

202.590844

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

589.761259

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

290.889624

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

272.204055

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

700.093375

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

178.075845

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

498.239495

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

661.226087

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

181.322136

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

125.471719

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

647.812890

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-27

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

132.101805

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

358.642873

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

146.145357

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

102.887430

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

208.302275

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

81.524417

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

238.921421

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

791.484165

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

345.531663

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

287.221013

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

586.114604

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

295.882512

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

284.234186

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

535.673913

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

69.541701

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

414.252991

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

784.138056

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

229.345838

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

119.435322

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

579.889241

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-28

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

222.640369

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

366.022743

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

115.067266

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

116.449680

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

250.425359

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

148.844354

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

275.022411

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

752.114741

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

354.166936

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

169.165896

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

593.454568

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

195.213433

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

337.399911

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

585.925378

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

189.023488

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

534.741665

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

704.106150

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

135.289388

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

115.967349

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

652.606268

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  <tr>
#+end_html

#+begin_html
  <th>
#+end_html

2000-08-29

#+begin_html
  </th>
#+end_html

#+begin_html
  <td>
#+end_html

149.620169

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

456.133542

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

95.750729

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

68.723084

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

288.081798

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

68.963008

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

293.000945

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

710.407533

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

355.012295

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

149.826230

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

...

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

699.443710

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

234.142601

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

322.597428

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

644.813865

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

163.194116

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

550.954196

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

721.663289

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

162.840400

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

143.058806

#+begin_html
  </td>
#+end_html

#+begin_html
  <td>
#+end_html

630.970785

#+begin_html
  </td>
#+end_html

#+begin_html
  </tr>
#+end_html

#+begin_html
  </tbody>
#+end_html

#+begin_html
  </table>
#+end_html

#+begin_html
  <p>
#+end_html

14 rows × 50 columns

#+begin_html
  </p>
#+end_html

**** 予測結果の確認
:PROPERTIES:
:CUSTOM_ID: 予測結果の確認
:END:
#+begin_src python
# 予測結果を可視化するための関数
def plot_result(target_data_name):
    # グラフサイズの指定
    fig, ax = plt.subplots(figsize=(8, 4))
    
    # 折れ線グラフを描く
    ax.plot(large_data_2.loc['2000-07-15':][target_data_name], 
            label='実際の売り上げ')
    ax.plot(forecasts_1[target_data_name], 
            label='古いデータを用いた予測値')
    ax.plot(forecasts_2[target_data_name], 
            label='新しいデータを用いた予測値')

    # 凡例
    ax.legend()
    
    # 軸の指定(週ごと)
    ax.xaxis.set_major_locator(mdates.WeekdayLocator(interval=1))
    
    # 軸ラベルのフォーマット
    ax.xaxis.set_major_formatter(mdates.DateFormatter('%m月%d日'))
#+end_src

#+begin_src python
# 予測結果の可視化
plot_result('y_0')
#+end_src

#+caption: png
[[file:7-1-%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E4%BF%9D%E5%AD%98%E3%81%A8%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF_files/7-1-%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E4%BF%9D%E5%AD%98%E3%81%A8%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF_39_0.png]]
